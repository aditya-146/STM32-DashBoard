#include "GY_521.h"

uint8_t Z_data[2];
int16_t z_raw;
float az_g;
float tilt_deg;
float relative_tilt;
float tilt_offset;

uint8_t Temp_Data[2];
int16_t temp_raw;
float temp_deg;

 HAL_StatusTypeDef GY521_Connection(){
	 HAL_StatusTypeDef ret = HAL_I2C_IsDeviceReady(&hi2c1, (0x68 << 1) + 0, 1, 100);
	 return ret;
 }

 void GY521_Config(){
	 //Config gyros range
	 uint8_t temp_data = 0b00001000;
	 ret = HAL_I2C_Mem_Write(&hi2c1, (0x68 << 1) + 0, 27, 1, &temp_data, 1, 100);

	 //Config acc range
	 temp_data = 0b00000000;
	 ret = HAL_I2C_Mem_Write(&hi2c1, (0x68 << 1) + 0, 28, 1, &temp_data, 1, 100);

	 //Remove device from sleep mode and config temp sensor
	 temp_data = 0;
	 ret = HAL_I2C_Mem_Write(&hi2c1, (0x68 << 1) + 0, 107, 1, &temp_data, 1, 100);
 }


